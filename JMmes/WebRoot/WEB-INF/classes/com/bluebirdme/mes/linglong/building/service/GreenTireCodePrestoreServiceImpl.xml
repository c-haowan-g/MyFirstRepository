<?xml version="1.0" encoding="UTF-8"?>
<sqls>
    <sql comment="datagrid" id="datagridUDA_rows">
        <![CDATA[
           select t.*,
     		 (select u.username from core_user u where u.usercode = t.created_by_s) createdname,
     		 (select u.username from core_user u where u.usercode = t.changed_by_s) changedname
 				from AT_B_MM_GREENTIREPRESTORE t
 				where 1 = 1
  				 and t.record_flag_s = 'A'

                <#if agenc_no_s??>
                     and AGENC_NO_S=:agenc_no_s
                </#if>
                <#if barcode_s??>
                     and BARCODE_S like:barcode_s
                </#if>
                <#if changed_by_s??>
                     and CHANGED_BY_S=:changed_by_s
                </#if>
                <#if changed_time_t??>
                     and CHANGED_TIME_T=:changed_time_t
                </#if>
                <#if created_by_s??>
                     and CREATED_BY_S=:created_by_s
                </#if>
                <#if created_time_t??>
                     and CREATED_TIME_T=:created_time_t
                </#if>
                <#if record_flag_s??>
                     and RECORD_FLAG_S=:record_flag_s
                </#if>
                <#if spare1_s??>
                     and SPARE1_S=:spare1_s
                </#if>
                <#if spare2_s??>
                     and SPARE2_S=:spare2_s
                </#if>
                <#if spare3_s??>
                     and SPARE3_S=:spare3_s
                </#if>
                <#if spare4_s??>
                     and SPARE4_S=:spare4_s
                </#if>
                <#if spare5_s??>
                     and SPARE5_S=:spare5_s
                </#if>
                <#if status_s??>
                     and STATUS_S=:status_s
                </#if>
                <#if s_factory_s??>
                     and S_FACTORY_S=:s_factory_s
                </#if>
                <#if equip_code_s??>
                     and EQUIP_CODE_S=:equip_code_s
                </#if>
                <#if start_time?? && end_time??>
	                 and CREATED_TIME_T between TO_DATE(:start_time,'YYYY-mm-dd HH24:MI:SS')
	                 and TO_DATE(:end_time,'YYYY-mm-dd HH24:MI:SS') 
	            </#if>
                
            <#if sort??&&order??>
                order by ${sort} ${order}
            <#else>
                order by t.barcode_s desc
            </#if>  
            
            
        ]]>
    </sql>
    <sql comment="datagrid" id="datagridUDA_total">
        <![CDATA[
            select count(1) from AT_B_MM_GREENTIREPRESTORE t where 1=1 and t.record_flag_s ='A'
                    <#if agenc_no_s??>
                         and AGENC_NO_S=:agenc_no_s
                    </#if>
                    <#if barcode_s??>
                         and BARCODE_S like:barcode_s
                    </#if>
                    <#if changed_by_s??>
                         and CHANGED_BY_S=:changed_by_s
                    </#if>
                    <#if changed_time_t??>
                         and CHANGED_TIME_T=:changed_time_t
                    </#if>
                    <#if created_by_s??>
                         and CREATED_BY_S=:created_by_s
                    </#if>
                    <#if created_time_t??>
                         and CREATED_TIME_T=:created_time_t
                    </#if>
                    <#if record_flag_s??>
                         and RECORD_FLAG_S=:record_flag_s
                    </#if>
                    <#if spare1_s??>
                         and SPARE1_S=:spare1_s
                    </#if>
                    <#if spare2_s??>
                         and SPARE2_S=:spare2_s
                    </#if>
                    <#if spare3_s??>
                         and SPARE3_S=:spare3_s
                    </#if>
                    <#if spare4_s??>
                         and SPARE4_S=:spare4_s
                    </#if>
                    <#if spare5_s??>
                         and SPARE5_S=:spare5_s
                    </#if>
                    <#if status_s??>
                         and STATUS_S=:status_s
                    </#if>
                    <#if s_factory_s??>
                         and S_FACTORY_S=:s_factory_s
                    </#if>
                    <#if equip_code_s??>
                         and EQUIP_CODE_S=:equip_code_s
                    </#if>
                    <#if start_time?? && end_time??>
	                 and CREATED_TIME_T between TO_DATE(:start_time,'YYYY-mm-dd HH24:MI:SS')
	                 and TO_DATE(:end_time,'YYYY-mm-dd HH24:MI:SS') 
	                </#if>
        ]]>
    </sql>
    <sql comment="胎胚編碼最大值" id="getMaxBarcode">
        <![CDATA[
            select max(barcode_s) from AT_B_MM_GreenTirePrestore t
            where 1=1 and t.record_flag_s='A'
        ]]>
    </sql>
</sqls>