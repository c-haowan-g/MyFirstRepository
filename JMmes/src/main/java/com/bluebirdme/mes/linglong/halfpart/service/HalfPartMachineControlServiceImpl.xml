<?xml version="1.0" encoding="UTF-8"?>
<sqls>
    <sql comment="datagrid" id="datagrid_rows">
        <![CDATA[
            select * from AT_CM_EM_MACHINESTATUS where 1=1
                <#if agenc_no_s??>
                     and AGENC_NO_S=:agenc_no_s
                </#if>
                <#if assistantone_s??>
                     and ASSISTANTONE_S=:assistantone_s
                </#if>
                <#if assistantthree_s??>
                     and ASSISTANTTHREE_S=:assistantthree_s
                </#if>
                <#if assistanttwo_s??>
                     and ASSISTANTTWO_S=:assistanttwo_s
                </#if>
                <#if auto_hand_s??>
                     and AUTO_HAND_S=:auto_hand_s
                </#if>
                <#if changed_by_s??>
                     and CHANGED_BY_S=:changed_by_s
                </#if>
                <#if changed_time_t??>
                     and CHANGED_TIME_T=:changed_time_t
                </#if>
                <#if clothliner_s??>
                     and CLOTHLINER_S=:clothliner_s
                </#if>
                <#if created_by_s??>
                     and CREATED_BY_S=:created_by_s
                </#if>
                <#if created_time_t??>
                     and CREATED_TIME_T=:created_time_t
                </#if>
                <#if curlyworkerassistantone_s??>
                     and CURLYWORKERASSISTANTONE_S=:curlyworkerassistantone_s
                </#if>
                <#if curlyworkerassistthree_s??>
                     and CURLYWORKERASSISTTHREE_S=:curlyworkerassistthree_s
                </#if>
                <#if curlyworkerassisttwo_s??>
                     and CURLYWORKERASSISTTWO_S=:curlyworkerassisttwo_s
                </#if>
                <#if curlyworker_s??>
                     and CURLYWORKER_S=:curlyworker_s
                </#if>
                <#if column_4_s??>
                     and Column_4_S=:column_4_s
                </#if>
                <#if equipdescription_s??>
                     and EQUIPDESCRIPTION_S=:equipdescription_s
                </#if>
                <#if firstnum_i??>
                     and FIRSTNUM_I=:firstnum_i
                </#if>
                <#if inwarehouseflag_s??>
                     and INWAREHOUSEFLAG_S=:inwarehouseflag_s
                </#if>
                <#if isplate_s??>
                     and ISPLATE_S=:isplate_s
                </#if>
                <#if lastmaterialcode_s??>
                     and LASTMATERIALCODE_S=:lastmaterialcode_s
                </#if>
                <#if lastmaterialname_s??>
                     and LASTMATERIALNAME_S=:lastmaterialname_s
                </#if>
                <#if machinebarcode_s??>
                     and MACHINEBARCODE_S=:machinebarcode_s
                </#if>
                <#if machinestatus_s??>
                     and MACHINESTATUS_S=:machinestatus_s
                </#if>
                <#if machinetype_s??>
                     and MACHINETYPE_S=:machinetype_s
                </#if>
                <#if materialcode_s??>
                     and MATERIALCODE_S=:materialcode_s
                </#if>
                <#if materialname_s??>
                     and MATERIALNAME_S=:materialname_s
                </#if>
                <#if materialspec_s??>
                     and MATERIALSPEC_S=:materialspec_s
                </#if>
                <#if material_beyondtime_f??>
                     and MATERIAL_BEYONDTIME_F=:material_beyondtime_f
                </#if>
                <#if material_parktime_f??>
                     and MATERIAL_PARKTIME_F=:material_parktime_f
                </#if>
                <#if mouldcode_s??>
                     and MOULDCODE_S=:mouldcode_s
                </#if>
                <#if operator_s??>
                     and OPERATOR_S=:operator_s
                </#if>
                <#if order_code_s??>
                     and ORDER_CODE_S=:order_code_s
                </#if>
                <#if order_finishi_i??>
                     and ORDER_FINISHI_I=:order_finishi_i
                </#if>
                <#if order_quantity_i??>
                     and ORDER_QUANTITY_I=:order_quantity_i
                </#if>
                <#if outquantity_i??>
                     and OUTQUANTITY_I=:outquantity_i
                </#if>
                <#if planno_s??>
                     and PLANNO_S=:planno_s
                </#if>
                <#if planquantity_i??>
                     and PLANQUANTITY_I=:planquantity_i
                </#if>
                <#if printquantity_s??>
                     and PRINTQUANTITY_S=:printquantity_s
                </#if>
                <#if process_index_s??>
                     and PROCESS_INDEX_S=:process_index_s
                </#if>
                <#if process_s??>
                     and PROCESS_S=:process_s
                </#if>
                <#if productiongver_s??>
                     and PRODUCTIONGVER_S=:productiongver_s
                </#if>
                <#if producttype_s??>
                     and PRODUCTTYPE_S=:producttype_s
                </#if>
                <#if record_flag_s??>
                     and RECORD_FLAG_S=:record_flag_s
                </#if>
                <#if remarks_s??>
                     and REMARKS_S=:remarks_s
                </#if>
                <#if sapm_group_s??>
                     and SAPM_GROUP_S=:sapm_group_s
                </#if>
                <#if spare10_s??>
                     and SPARE10_S=:spare10_s
                </#if>
                <#if spare1_s??>
                     and SPARE1_S=:spare1_s
                </#if>
                <#if spare2_s??>
                     and SPARE2_S=:spare2_s
                </#if>
                <#if spare3_s??>
                     and SPARE3_S=:spare3_s
                </#if>
                <#if spare4_s??>
                     and SPARE4_S=:spare4_s
                </#if>
                <#if spare5_s??>
                     and SPARE5_S=:spare5_s
                </#if>
                <#if spare6_s??>
                     and SPARE6_S=:spare6_s
                </#if>
                <#if spare7_s??>
                     and SPARE7_S=:spare7_s
                </#if>
                <#if spare8_s??>
                     and SPARE8_S=:spare8_s
                </#if>
                <#if spare9_s??>
                     and SPARE9_S=:spare9_s
                </#if>
                <#if s_factory_s??>
                     and S_FACTORY_S=:s_factory_s
                </#if>
                <#if worker1_id_s??>
                     and WORKER1_ID_S=:worker1_id_s
                </#if>
                <#if worker1_name_s??>
                     and WORKER1_NAME_S=:worker1_name_s
                </#if>
                <#if worker2_id_s??>
                     and WORKER2_ID_S=:worker2_id_s
                </#if>
                <#if worker2_name_s??>
                     and WORKER2_NAME_S=:worker2_name_s
                </#if>
                <#if worker3_id_s??>
                     and WORKER3_ID_S=:worker3_id_s
                </#if>
                <#if worker3_name_s??>
                     and WORKER3_NAME_S=:worker3_name_s
                </#if>
            <#if sort??&&order??>
                order by ${sort} ${order}
                <#else>
                order by atr_key desc
            </#if>
        ]]>
    </sql>

    <sql comment="datagrid" id="datagridUDA_total">
        <![CDATA[
            SELECT count(1)
		    FROM AREA c,AREA_PRODUCTION_LINE d,	PRODUCTION_LINE p
		    WHERE  AREA_KEY = d.PARENT_KEY   AND d.CHILD_KEY = p.P_LINE_KEY AND c.AREA_NAME = '80231A'
		     <#if machinebarcode_s??>
                  and p.P_LINE_NAME=:machinebarcode_s
             </#if>
              <#if machinetype_s??>
                  and p.category=:machinetype_s
             </#if>
        ]]>
    </sql>

    <sql comment="获取数据字段119" id="searchBy119">
        <![CDATA[
            select DICTCODE_S,DICTNAME_S AS DICTNAME
            from AT_CM_BS_COREDICTIONARY
            where deleted_i='0'
            start with PID_I=(select ATR_KEY from AT_CM_BS_COREDICTIONARY
            where DICTCODE_S='119' and deleted_i='0')
            connect by DICTCODE_S=PID_I
        ]]>
    </sql>

    <sql comment="机台控制日志" id="datagridLog">
        <![CDATA[
            select  AU.*,cu.username  from AT_A_MM_USECONTROLLOG AU
            left join CORE_USER cu on au.CREATED_BY_S = cu.USERCODE
            where 1 = 1
            <#if s_factory_s??>
                 and S_FACTORY_S = :s_factory_s
             </#if>
            and RECORD_FLAG_S = 'A'
            and SPARE1_S = '252004'
            order by CREATION_TIME desc
        ]]>
    </sql>

    <sql comment="机台控制日志" id="datagridLog_total">
        <![CDATA[
            select  count(1)  from AT_A_MM_USECONTROLLOG AU
            where 1 = 1
             <#if s_factory_s??>
                 and S_FACTORY_S = :s_factory_s
             </#if>
            and RECORD_FLAG_S = 'A'
            and SPARE1_S = '252004'
        ]]>
    </sql>
</sqls>